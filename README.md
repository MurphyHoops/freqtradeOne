# TaxBrain V29 - åˆ†å¸ƒå¼å¾®ä»“é©¬ä¸ç³»ç»?
åŸºäº Freqtrade çš„å¤šæ™ºèƒ½ä½“ç­–ç•¥æ¡†æ¶ï¼Œå›´ç»•åˆ†å¸ƒå¼ä¾¦å¯Ÿã€å±€éƒ¨æ¢å¤ä¸å…¨å±€ç¤¾ä¼šåŒ–é£æ§æ„å»ºã€‚æœ¬æ–‡æ¡£èšç„¦æ ¸å¿ƒäº¤æ˜“å“²å­¦ä¸æ¶æ„è¦ç‚¹ï¼Œå¸®åŠ©å¿«é€Ÿå¯¹é½ä»£ç å®ç°ã€?
## V30 (Tensor-Logic) Entry
- Use strategy file `user_data/strategies/TaxBrainV30.py`.
- Signals live under `user_data/strategies/plugins/signals/`.
- MatrixEngine injects feature columns and uses PoolBuffer + Bridge for backtest/live parity.
## æ ¸å¿ƒäº¤æ˜“å“²å­¦
- åˆ†å¸ƒå¼å¾®ä»“ä¾¦å¯Ÿï¼ˆDistributed Scoutingï¼‰ï¼šT0 å¾®ä»“åœ?100+ äº¤æ˜“å¯¹æ’’ç½‘ï¼Œç”¨å¤§æ•°å®šå¾‹ç¨€é‡Šå•ç¥¨é»‘å¤©é¹…ã€?- å±€éƒ¨é©¬ä¸å›æœ¬ï¼ˆLocal Recoveryï¼‰ï¼šå•å¸äºæŸè§¦å‘ T1-T5 é€’è¿›åŠ æ³¨ï¼Œå°† 50% èƒœç‡æ‹‰å‘ç¡®å®šæ€?98%+ï¼Œä¼˜å…ˆåœ¨æœ¬åœ°æ¶ˆåŒ–ã€?- å…¨å±€å€ºåŠ¡ç†”æ–­ï¼ˆSocialized Riskï¼‰ï¼šå‡»ç©¿ Max Tier å³ç†”æ–­ï¼Œåœæ­¢åŠ æ³¨ï¼Œåè´¦ä¸€æ¬¡æ€§å†²å…¥ä¸­å¤®å€ºåŠ¡æ± ã€?- åŠ¨æ€åˆ†æ‘Šè¿˜å€ºï¼ˆFluid Repaymentï¼‰ï¼šä¸­å¤®å€ºåŠ¡æŒ‰ä¿¡å·è´¨é‡ï¼ˆscoreÂ²ï¼‰éçº¿æ€§åˆ†æ‘Šç»™å½“å‰æœ€å¥åº·çš„â€œæ‰“å·¥ä»”â€ï¼Œä»¥é«˜èƒœç‡ä¿®å¤ã€?- æ¦‚ç‡ä¼˜åŠ¿ä¼˜å…ˆï¼ˆAlpha Gatekeepingï¼‰ï¼šæœ‰å€ºåŠ¡æ—¶æ”¶ç´§é—¨æ§›ï¼Œä»…æ”¾è¡Œé«˜èƒœç‡ä¿¡å·æºå¸¦åˆ†æ‘Šé¢å¼€ä»“ï¼›ä¿æŒæ•´ä½“ P>51% å³å¯æŒç»­æ¶ˆå€ºã€?
## æ¶æ„ä¸èŒè´?- Global backendï¼š`global_backend_mode`=`redis` æˆ?`local`ã€‚Redis å…±äº« `GLOBAL_DEBT/GLOBAL_RISK_USED/SCORES_WINDOW` ä¸å¸‚åœºåç§»ï¼Œæ”¯æŒå¤šå®ä¾‹ä¸€è‡´çš„å€ºåŠ¡ã€å®¹é‡ä¸åˆ†ä½æ•°é—¨æ§›ã€?- Market sensingï¼š`MarketSensor` è®¡ç®— BTC/ETH bias+volï¼Œå¹¶å†™å…¥ backendï¼Œå½±å“æ‹¨æ¬¾æåæ ‡ä¸?sizing ç†µå› å­ã€?- Signal pipelineï¼š`agents/signals/builder.py` æ±‡æ€»æ³¨å†Œä¿¡å·ï¼Œç”Ÿæˆå?SL/TP/score/exit_profile/recipe/ATR æç¤ºçš?`Candidate`ã€?- Tiers & routingï¼š`TierManager` ä¾?closs é€‰æ‹© `TierPolicy`ï¼ˆå†·å´ã€capsã€é»˜è®?exit_profileã€å•ç¥¨ç‹¬å ï¼‰ï¼›`TierAgent` æŒ?min_raw_score/min_rr/min_edge è¿‡æ»¤ã€?- Gatekeepingï¼š`TreasuryAgent.evaluate_signal_quality` ç”¨ç»Ÿä¸€ `min_score`ï¼ˆå¯å…³ï¼‰åˆ¤å®šæ”¾è¡Œï¼›å¥åº·å¸åœ¨æ— å€ºæˆ– clean çŠ¶æ€å¯äº«ä½é—¨æ§›ã€?- Treasuryï¼š`TreasuryAgent.plan` è¯»å– backend snapshot + æœ¬åœ°é£é™©/é¢„çº¦ï¼Œè®¡ç®—ç»„å?CAPã€å¯ç”?debt æ³¨å…¥ã€æåæ ‡ K_long/K_shortã€thetaã€volatilityã€final_rã€?- Sizingï¼š`SizerAgent` ç»“åˆ tier capsã€baseline/target recoveryã€central fluidï¼ˆscoreÂ² æ³¨å…¥ï¼‰ã€exchange æœ€å°é¢ï¼Œè¾“å‡?nominal stake ä¸å®é™…é£é™©ï¼›å¦‚å¯ç”?Redisï¼Œå»ºä»“å‰ä¼šä»¥ CAP ä¸Šé™è°ƒç”¨ `add_risk_usage`ã€?- Reservationï¼š`ReservationAgent` å…ˆé”é£é™©ï¼ˆTTLï¼‰ï¼Œæˆäº¤/æ’¤å•/è¿‡æœŸé‡Šæ”¾ï¼›åŒæ—¶åŒæ­?backend risk_usedã€?- Execution & exitsï¼š`ExecutionAgent` è´Ÿè´£ä¸‹å•å…ƒæ•°æ®ï¼›`ExitFacade` è§£æé…ç½®åŒ?exit_profiles + ATRï¼›`ExitPolicyV29` å¤„ç†é”ç›ˆã€flipã€risk-offã€ICUã€?- Cycle & persistï¼š`CycleAgent` æ¯?bar è¡°å‡å€ºåŠ¡/å†·å´/é¢„çº¦ TTLï¼Œåˆ·æ–°æ‹¨æ¬¾ï¼Œç›ˆåˆ©å‘¨æœŸå¯é€‰æ¸…å€ºï¼›`RiskAgent` æ ¡éªŒç»„åˆ/å•ç¥¨/é¢„çº¦ä¸€è‡´æ€§ï¼›`StateStore` æŒä¹…åŒ–åˆ° JSONï¼ˆå›æµ?ä¼˜åŒ–è‡ªåŠ¨ç¦ç”¨ï¼‰ã€?
## å€ºåŠ¡ä¸æ¢å¤æœºåˆ?- æœ¬åœ°å€ºåŠ¡ï¼šäºæŸç´¯åŠ åˆ° `PairState.local_loss`ï¼›ç›ˆåˆ©ä¼˜å…ˆæ¸…æœ¬åœ°ï¼Œå†è¿˜ä¸­å¤®ï¼ˆbackend.repay_lossï¼‰ã€‚closs å‡çº§é©±åŠ¨æ›´ä¸¥ tier/cooldownã€?- ç†”æ–­ä¸ä¸­å¤®å€ºï¼šè¾¾åˆ° Max Tier çš„äºæŸè½¬å…?`debt_pool` å¹?`backend.add_loss`ï¼Œæœ¬åœ°å€ºåŠ¡æ¸…é›¶å¹¶é‡ç½?clossã€?- æµåŠ¨åˆ†æ‘Šï¼š`SizerAgent` å°?scoreÂ² æ˜ å°„ä¸ºä¸­å¿ƒæ³¨å…¥ï¼ˆcenter_algoï¼Œé»˜è®?TARGET_RECOVERYï¼‰ï¼ŒæŠŠä¸­å¤®å€ºåŠ¡åˆ†é…ç»™å½“å‰é«˜åˆ†æ ‡çš„ï¼›æœ¬åœ°å€ºåŠ¡ç”¨ç›¸åŒç®¡çº¿æ±‚è§£ã€?- è¡°å‡ä¸æ¸…é›¶ï¼š`CycleAgent` æŒ?`risk.pain_decay_per_bar` è¡°å‡ä¸­å¤®å€ºï¼›è‹¥é…ç½®ç›ˆåˆ©å‘¨æœŸæ¸…å€ºï¼Œå‘¨æœŸä¸ºæ­£ä¸”ç›ˆåˆ©æ—¶ä¸€é”®å½’é›¶ã€?
## Gatekeeping ä¸å®¹é‡æ§åˆ?- è¯„åˆ†é—¨æ§›ï¼š`risk.gatekeeping.min_score`ï¼ˆç»Ÿä¸€å¿?æ…¢é€šé“ï¼‰ï¼Œæ‹’ç»åˆ™è®°å½•åŸå› ï¼›æ— å€ºä¸” clean closs å¯ç”¨å®½æ¾ç­–ç•¥ï¼ˆå¥åº·é€šé“ï¼‰ã€?- Tier é˜ˆå€¼ï¼š`TierPolicy` æ§åˆ¶ min_raw_score/min_rr/min_edgeã€å†·å´ã€per_pair_risk_cap_pctã€max_stake_notional_pctã€icu_force_exit_barsã€?- ç»„åˆ CAPï¼š`portfolio_cap_pct_base` éšå€ºåŠ¡ç‡è¶…è¿?`drawdown_threshold_pct` æŠ˜åŠï¼›backend é£é™©å ç”¨ç”¨äºå¤šå®ä¾‹ä¹è§‚é”ã€?- é¢„çº¦ TTLï¼š`reservation_ttl_bars` è¶…æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œä¸å›æ»šè´¢æ”¿ã€?
## é…ç½®å…¥å£
- é…ç½®å®šä¹‰ï¼š`user_data/strategies/config/v29_config.py`ï¼ˆå­—æ®µå« docstringï¼‰ï¼›æ¨¡æ¿ `user_data/config_template_v29.json`ã€?- å…³é”®å‚æ•°ï¼š`system.global_backend_mode`/redis è¿æ¥ï¼›`risk.pain_decay_per_bar`ã€`drawdown_threshold_pct`ã€`portfolio_cap_pct_base`ã€`gatekeeping.min_score`ï¼›`trading.treasury.debt_pool_cap_pct`ï¼›`strategy.tier_routing/tiers/exit_profiles`ï¼›`sizing_algos`ï¼ˆBASE_ONLY/BASELINE/TARGET_RECOVERYï¼‰ã€?- è¿è¡Œæ¨¡å¼ï¼šå›æµ?è¶…å‚å¼ºåˆ¶ä½¿ç”¨ local backendï¼›å®ç›˜å¤šå®ä¾‹éœ€å®‰è£… `redis` ä¾èµ–å¹¶é…ç½?redis host/port/db/namespaceã€?
## å¿«é€Ÿæç¤?- å¯ç”¨ Redisï¼šé…ç½?`system.global_backend_mode="redis"`ï¼Œå¹¶æä¾› `redis_host/redis_port/redis_db/redis_namespace`ï¼›å¤±è´¥ä»…é™çº§æ—¥å¿—ï¼Œä¸ä¸­æ–­ã€?- æ—¥å¿—ä¸æŒä¹…åŒ–ï¼š`user_data/logs` å­˜å‚¨ analyticsã€sizer/tier debugï¼›çŠ¶æ€æ–‡ä»?`taxbrain_v29_state.json` å¯æ–­ç‚¹ç»­è·‘ã€?- æŒ‡æ ‡/ä¿¡å·ï¼šå¦‚éœ€è£å‰ªä¿¡å·æˆ–é¢å¤–å› å­ï¼Œå¯åœ¨ config ä¸?`enabled_signals`/`extra_signal_factors` è°ƒæ•´ï¼Œbuilder ä¼šè‡ªåŠ¨è®¡ç®—ä¾èµ–çš„æŒ‡æ ‡ä¸ä¿¡æ¯å‘¨æœŸã€?- Vectorized backtest with informative timeframes requires `merge_informative_into_base=true` for consistency.
